var SYNTAX_STATUS_INIT=0,SYNTAX_STATUS_STR=1,SYNTAX_STATUS_COMMENT_SINGLE_LINE=2,SYNTAX_STATUS_COMMENT_MULTI_LINE=2;window.SQLSyntaxParser=function(t){this.onNextWord=t||function(){},this.status=SYNTAX_STATUS_INIT,this.pendingWord="",this.pendingString="",this.quote=null,this.lastChar=null,this.escapeStatus=""},SQLSyntaxParser.prototype.next=function(t){switch(this.status){case SYNTAX_STATUS_INIT:0<=["`","'",'"'].indexOf(t)?(this.status=SYNTAX_STATUS_STR,this.pendingString="",this.quote=t):0<=[",",";","=","(",")"].indexOf(t)?(this.pendingWord&&(this.onNextWord(this.pendingWord,"word"),this.pendingWord="",this.escapeStatus=""),this.onNextWord(t,"token")):0<=[" ","\t","\n","\r"].indexOf(t)?this.pendingWord&&(this.onNextWord(this.pendingWord,"word"),this.pendingWord=""):"-"===t&&"-"===this.lastChar?this.status=SYNTAX_STATUS_COMMENT_SINGLE_LINE:"*"===t&&"/"===this.lastChar?this.status=SYNTAX_STATUS_COMMENT_MULTI_LINE:this.pendingWord+=t;break;case SYNTAX_STATUS_COMMENT_SINGLE_LINE:"\n"===t&&(this.status=SYNTAX_STATUS_INIT,this.pendingWord="");break;case SYNTAX_STATUS_COMMENT_MULTI_LINE:"/"===t&&"*"===this.lastChar&&(this.status=SYNTAX_STATUS_INIT,this.pendingWord="");break;case SYNTAX_STATUS_STR:if("\\"!==t||this.escapeStatus)if(this.escapeStatus){if(1===this.escapeStatus.length)"b"===t?(this.escapeStatus="",this.pendingString+="\b"):"f"===t?(this.escapeStatus="",this.pendingString+="\f"):"n"===t?(this.escapeStatus="",this.pendingString+="\n"):"r"===t?(this.escapeStatus="",this.pendingString+="\r"):"t"===t?(this.escapeStatus="",this.pendingString+="\t"):"u"===t?this.escapeStatus+="u":(this.escapeStatus="",this.pendingString+=t);else if(this.escapeStatus+=t,6<=this.escapeStatus.length){try{this.pendingString+=JSON.parse('"'+this.escapeStatus+'"')}catch(t){console.error(t)}this.escapeStatus=""}}else t===this.quote?(this.onNextWord(this.pendingString,"string"),this.pendingWord="",this.status=SYNTAX_STATUS_INIT):this.pendingString+=t;else this.escapeStatus=t;break;default:this.status=SYNTAX_STATUS_INIT}this.lastChar=t};